plugin: google.cloud.gcp_compute
projects:
  - "{{ lookup('ansible.builtin.env','GCP_PROJECT_ID') | mandatory }}"
auth_kind: serviceaccount
service_account_file: "{{ lookup('ansible.builtin.env','GCP_SERVICE_ACCOUNT_FILE') | mandatory }}"
filters:
  - name = simple-elixir-instance
keyed_groups:
  - key: labels
    prefix: label
hostnames:
  - name
compose:
  ansible_host: networkInterfaces[0].accessConfigs[0].natIP
  ansible_user: ubuntu
  ansible_ssh_common_args: '-o StrictHostKeyChecking=no'
